\mode<presentation>

% slide background
\setbeamertemplate{background}{
    \begin{tikzpicture}
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        % (0,0) start at X=0, Y=0 draw a rectangle to (1/3 of paperwidth and Y=0.2) 
        % x:left to right, y: bottom to top
        
        % TH Köln lines at the top of the frame
        \fill[color=thk-red] (\thkmarginleft,\the\paperheight) rectangle(\thkmarginleft+\thkrest/3,\the\paperheight-1.8); 
        \fill[color=thk-orange] (\thkmarginleft+\thkrest/3,\the\paperheight) rectangle(\thkmarginleft+2*\thkrest/3,\the\paperheight-1.8);
        \fill[color=thk-violet] (\thkmarginleft+2*\thkrest/3,\the\paperheight) rectangle(\thkmarginleft+3*\thkrest/3,\the\paperheight-1.8);
        
        %% Footer %%
        % a small gray line
        \fill[color=gray] (\thkmarginleft,0.15*\the\paperheight) rectangle(\the\paperwidth,0.15*\the\paperheight-0.4);

        % anchor=west aligns text to the left

        % date %
        \ifx\insertshortdate\empty
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_date) at (\thkmarginleft,0.12*\the\paperheight) 
                {\insertdate};
        \else
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_date) at (\thkmarginleft,0.12*\the\paperheight) 
                {\insertshortdate};
        \fi

        % page %
        \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
            (N_date) at (\thkmarginleft,0.06*\the\paperheight) 
            {\insertpagefooterlocalization \thepage};

        % supervisor %
        \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
            (N_supervisor) at (2*\thkmarginleft,0.12*\the\paperheight) 
            {\insertsupervisor};

        % title %
        \ifx\insertshortsubtitle\empty % check if a short title exists
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_title) at (2*\thkmarginleft,0.09*\the\paperheight) 
                {\inserttitle};
        \else
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_title) at (2*\thkmarginleft,0.09*\the\paperheight) 
                {\insertshorttitle};
        \fi

        % author %
        \ifx\insertshortauthor\empty 
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_author) at (2*\thkmarginleft,0.06*\the\paperheight) 
                {\insertauthor};
        \else
            \node[anchor=west, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_author) at (2*\thkmarginleft,0.06*\the\paperheight) 
                {\insertshortauthor};
        \fi

        % TH Köln Logo
        \node[anchor=east, font=\fontsize{4pt}{7pt}\selectfont, text=black]
                (N_logo) at (\the\paperwidth -8,0.09*\the\paperheight) 
                {\includesvg[width=.15\linewidth]{figures/thk-logo}};
    %    \ifnum\thepage>1\relax % attempt at writing title author and date into the bottom rectangles on every page except for title
    %        %\node at (0,0) {\small \insertauthor};
    %        %\node at (\the\paperwidth/3,0) {\small \inserttitle};
    %        %\node at (2*\the\paperwidth/3,0) {\small \insertdate};
    %        \node[text width=\the\paperwidth/3, font=\fontsize{7pt}{7pt}\selectfont, text=light-gray]
    %            (N1) at (0.8*\the\paperwidth/3,0.15) 
    %            {\insertshortauthor};
    %        \node[text width=\the\paperwidth/3, font=\fontsize{7pt}{7pt}\selectfont, text=light-gray]
    %            (N2) at (1.55*\the\paperwidth/3,0.15) 
    %            {\inserttitle};
    %        \node[text width=\the\paperwidth/3, font=\fontsize{7pt}{7pt}\selectfont, text=light-gray]
    %            (N3) at (2.7*\the\paperwidth/3,0.15) 
    %            {\insertdate};
    %    \fi
    \end{tikzpicture}
}
\mode<all>
